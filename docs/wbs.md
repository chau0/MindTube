# MindTube WBS — Revised (2025-07-27)

**Changes:** Added `status` column and the following new tasks: OpenAPI spec, Mock server, Cancel flow (BE/FE), Ops runbook, Go‑Live checklist, Bench harness, Cost model, Prompts spec, Eval rubric, Metrics endpoint.

| Wbs Id | Feature Id | Task Name | Description | Owner (Role) | Estimate (Hours) | Priority | Phase | Status | Start (Jst) | End (Jst) | Dependencies | Deliverable |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| WBS-0.1 | nan | Repo & Tooling | Init monorepo, lint/format, pre-commit, CI lint | Infra | 2 | P0 | Setup | Not Started | 2025-07-27 AM | 2025-07-27 AM | nan | Repo initialized, CI green |
| WBS-0.2 | F-006 | Next.js Skeleton | Create FE app with landing route, tabs stub, dark theme base | FE | 3 | P0 | Setup | Not Started | 2025-07-27 AM | 2025-07-27 AM | WBS-0.1 | Running FE skeleton |
| WBS-0.3 | nan | FastAPI Skeleton | Create API app, settings/env, health endpoint | API | 3 | P0 | Setup | Not Started | 2025-07-27 PM | 2025-07-27 PM | WBS-0.1 | Running API skeleton |
| WBS-1.1 | F-001 | /ingest Contract & Validation | Define OpenAPI schema, validate YT URL formats, return job_id | API | 4 | P0 | Backend Scaffold | Not Started | 2025-07-27 PM | 2025-07-27 PM | WBS-0.3 | /ingest endpoint + schema |
| WBS-1.1b | F-001 | Job Model & Dedupe | Create job struct/table; dedupe identical in-flight jobs | BE | 2 | P0 | Backend Scaffold | Not Started | 2025-07-27 PM | 2025-07-27 PM | WBS-0.3 | Job store with dedupe |
| WBS-1.2 | F-002 | YouTube Metadata & Captions | Client for metadata + captions, quota/errors mapped | BE | 6 | P0 | Transcript Service | Not Started | 2025-07-28 | 2025-07-28 | WBS-1.1 | YT client module + tests |
| WBS-1.3 | F-003 | Transcript Normalizer & Hash | Normalize to segments with timestamps; compute transcript_hash | BE | 5 | P0 | Transcript Service | Not Started | 2025-07-28 | 2025-07-28 | WBS-1.2 | segments.json + hash |
| WBS-1.4 | F-004 | Chunker & Map Orchestrator | Token-aware chunking; parallel map with mini model + retries | BE | 8 | P0 | Summarization | Not Started | 2025-07-29 AM | 2025-07-29 AM | WBS-1.3 | Chunk outputs JSON |
| WBS-1.5 | F-004 | Reduce Stage + Budget | Reduce merge; dedupe; token/cost guardrail enforcement | BE | 6 | P0 | Summarization | Not Started | 2025-07-29 PM | 2025-07-29 PM | WBS-1.4 | Final sections JSON |
| WBS-1.6 | F-005 | Timestamp Linking Utility | ts string ↔ seconds helpers; YouTube &t=Ss links | BE | 2 | P0 | Summarization | Not Started | 2025-07-29 PM | 2025-07-29 PM | WBS-1.5 | Timestamp helpers + tests |
| WBS-1.7 | F-008 | Progress Events + Partial Summary | Emit stages, compute ETA; early short summary path | API/BE | 6 | P0 | Progress | Not Started | 2025-07-30 AM | 2025-07-30 AM | WBS-1.5 | Status updates + partial text |
| WBS-1.7b | F-004 | /status Schema | Standard progress fields: stage, pct, eta | API | 2 | P0 | Progress | Not Started | 2025-07-30 AM | 2025-07-30 AM | WBS-1.7 | OpenAPI + implementation |
| WBS-1.8 | F-009 | Error Taxonomy & Responses | Duration cap, private/members-only, invalid URL mapped to codes | API | 4 | P0 | Errors | Not Started | 2025-07-30 PM | 2025-07-30 PM | WBS-1.1 | Consistent error payloads |
| WBS-1.9 | F-010 | Cache Layer & Idempotency | Lookup by video_id+hash+params; artifact reuse; locking | BE | 6 | P0 | Cache | Not Started | 2025-07-31 AM | 2025-07-31 AM | WBS-1.5 | Cache hit path + tests |
| WBS-2.3 | F-006 | Tabs & ARIA | Tabs for Summary/Ideas/Takeaways/Transcript; keyboard accessible | FE | 4 | P0 | Frontend | Not Started | 2025-07-31 PM | 2025-07-31 PM | WBS-0.2 | Accessible tabs component |
| WBS-2.4 | F-004/F-005 | Render Sections & Timestamps | Render sections from /result; add timestamp chips | FE | 4 | P0 | Frontend | Not Started | 2025-07-31 PM | 2025-07-31 PM | WBS-2.3;WBS-1.6 | Results panels working |
| WBS-2.1 | F-001 | Landing Form + Validation | URL input with examples; disable Process until valid | FE | 3 | P0 | Frontend | Not Started | 2025-08-01 AM | 2025-08-01 AM | WBS-1.1 | Working form with hints |
| WBS-2.2 | F-008 | Progress UI + Early Output | Progress list + early Short Summary area | FE | 4 | P0 | Frontend | Not Started | 2025-08-01 AM | 2025-08-01 AM | WBS-1.7 | Live progress updates |
| WBS-2.5 | F-007 | Markdown Export | Copy to clipboard + download .md mirroring UI | FE | 3 | P0 | Frontend | Not Started | 2025-08-01 PM | 2025-08-01 PM | WBS-2.4 | .md file export |
| WBS-2.9 | F-009/F-014 | Error Modals | UX for invalid URL, too long; prompt to enable ASR when no captions | FE | 3 | P0 | Frontend | Not Started | 2025-08-01 PM | 2025-08-01 PM | WBS-1.8 | Clear modal flows |
| WBS-1.11 | F-016 | Concurrency & Queue ETA | Semaphore limit 3; queued jobs with ETA; cancel | BE | 6 | P1 | Optional | Not Started | 2025-08-02 AM | 2025-08-02 AM | WBS-1.7 | Queue manager + cancel |
| WBS-2.6 | F-011 | History Drawer | LocalStorage list of last 20 runs; open/delete | FE | 4 | P1 | Optional | Not Started | 2025-08-02 PM | 2025-08-02 PM | WBS-2.4 | History UI |
| WBS-2.7 | F-012 | Transcript Search | Client-side search and highlight in transcript panel | FE | 3 | P1 | Optional | Not Started | 2025-08-02 PM | 2025-08-02 PM | WBS-2.4 | Search box + highlight |
| WBS-2.8 | F-013 | Settings Modal | Language, duration cap, ASR default, budget guardrail | FE | 3 | P1 | Optional | Not Started | 2025-08-02 PM | 2025-08-02 PM | WBS-2.1 | Settings UI + local save |
| WBS-1.10 | F-014 | ASR Worker Stub | Whisper pipeline stub; duration-capped; returns transcript JSON | BE | 6 | P1 | Optional | Not Started | 2025-08-02 AM | 2025-08-02 AM | WBS-1.2 | ASR job path |
| WBS-1.12 | F-015 | Observability Logs & Metrics | Structured logs, timers, token estimates, counters | BE | 3 | P1 | Optional | Not Started | 2025-08-02 PM | 2025-08-02 PM | WBS-0.3 | Log fields + basic dashboard |
| WBS-2.10 | F-010 | Cache Badge (UI) | Show 'Loaded from cache' indicator on results | FE | 1 | P1 | Optional | Not Started | 2025-08-02 PM | 2025-08-02 PM | WBS-1.9 | Cache badge |
| WBS-2.11 | F-016 | Queued UI | Show queue position/ETA and cancel button | FE | 2 | P1 | Optional | Not Started | 2025-08-02 PM | 2025-08-02 PM | WBS-1.11 | Queued state UI |
| WBS-2.12 | F-014 | ASR Prompt UI | Dedicated ASR enable/continue modal & progress note | FE | 2 | P1 | Optional | Not Started | 2025-08-02 PM | 2025-08-02 PM | WBS-1.10 | ASR modal UI |
| WBS-3.1 | nan | Unit Tests | Chunker, time utils, markdown exporter, url validation | QA/BE | 5 | P0 | QA | Not Started | 2025-08-03 AM | 2025-08-03 AM | WBS-1.4;WBS-2.5 | pytest passing |
| WBS-3.2 | nan | Integration Tests | Captions → normalize; pipeline map/reduce (mock LLM) | QA/BE | 6 | P0 | QA | Not Started | 2025-08-03 AM | 2025-08-03 AM | WBS-1.2;WBS-1.5 | integration suite passing |
| WBS-3.3 | nan | API Smoke + Golden Set | Run /ingest→/status→/result; manual rubric on 10 videos | QA | 6 | P0 | QA | Not Started | 2025-08-03 PM | 2025-08-03 PM | WBS-2.2;WBS-2.4 | QA report + metrics |
| WBS-3.4 | nan | Docs Polish | README, known issues, ops notes; version tag | PM | 3 | P0 | QA | Not Started | 2025-08-03 PM | 2025-08-03 PM | WBS-3.3 | Docs ready for MVP |
| 1 | F-001 | Author OpenAPI spec | Write /openapi.yaml covering ingest/status/result endpoints incl. error schema; publish Swagger UI. | BE/API | 6 | P0 | Design | Not Started |  |  | Architecture endpoints defined | /openapi.yaml + Swagger served at /docs |
| 2 | F-001 | Mock server for FE integration | Spin mock server from OpenAPI; happy & error paths for FE to develop without backend. | BE/FE | 4 | P0 | Development | Not Started |  |  | OpenAPI spec ready | `npm run mock` target + CI check |
| 3 | F-016 | Implement cancel endpoint | Add POST /jobs/{id}/cancel (or DELETE) and persist cancel flag. | BE | 6 | P0 | Development | Not Started |  |  | Queueing baseline exists | Endpoint + unit tests |
| 4 | F-016 | Worker cooperative-cancel checks | Workers check cancel flag between stages and exit gracefully; mark job=canceled. | BE | 4 | P0 | Development | Not Started |  |  | Cancel endpoint in place | Integration test demonstrating cancel mid-run |
| 5 | F-016 | FE: Wire Cancel button & states | Add Cancel control in progress UI; reflect queued/cancelled states with toasts. | FE | 4 | P0 | Development | Not Started |  |  | Cancel endpoint live | UX flow + e2e test in Playwright |
| 6 | — | Write /docs/ops.md (runbook) | Environments, quotas, key rotation, incident steps, on-call notes for a solo builder. | PM/BE | 4 | P0 | Documentation | Not Started |  |  | Initial deploy tested | /docs/ops.md |
| 7 | — | Create Go-Live checklist | Check CORS, env vars, health checks, disk perms, logging level, domain config. | PM | 2 | P0 | Release | Not Started |  |  | Ops doc drafted | /docs/go-live-checklist.md |
| 8 | F-015 | Bench harness (latency & token cost) | Script golden-set runs; output CSV/HTML with p50/p95 latencies and total tokens. | BE | 6 | P0 | Testing | Not Started |  |  | Golden set defined | /bench/report.html + /bench/results.csv |
| 9 | F-013 | Cost model & guardrails | Write /docs/cost-model.md and enforce per-stage token budgets with graceful degradation. | BE/PM | 4 | P0 | Design | Not Started |  |  | Bench & settings scaffold | /docs/cost-model.md + budget checks in code |
| 10 | F-004 | Prompts specification | Map/reduce prompts, JSON schemas, few-shots, safety notes; stable outputs. | BE | 6 | P0 | Design | Not Started |  |  | Summarization pipeline stub | /docs/prompts.md |
| 11 | F-004 | Evaluation rubric & annotation template | Define coverage/correctness/actionability rubric; create annotation form for golden set. | PM | 6 | P0 | QA | Not Started |  |  | Prompts spec drafted | /docs/eval-rubric.md + /qa/annotation-template.md |
| 12 | F-015 | Metrics endpoint & log fields contract | Expose /metrics (dev) and document log fields (job_id, stage, tokens, cache_hit, duration_ms). | BE | 4 | P1 | Development | Not Started |  |  | Basic logging present | GET /metrics + /docs/observability.md |